<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ê³µì˜ˆí’ˆ</title>
  <link rel="preconnect" href="https://fastly.jsdelivr.net" crossorigin>
  
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <style>
    @font-face{font-family:'SUIT-Regular';src:url('https://fastly.jsdelivr.net/gh/projectnoonnu/noonfonts_suit@1.0/SUIT-Regular.woff2') format('woff2');font-weight:400;font-style:normal}
    @font-face {
        font-family: 'BookkGothic';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/BookkGothic-Lt.woff2') format('woff2');
        font-weight: 300;
        font-display: swap;
    }
    @font-face {
        font-family: 'BookkMyungjo';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/BookkMyungjo-Lt.woff2') format('woff2');
        font-weight: 400;
        font-display: swap;
    }
    @font-face {
        font-family: 'BookkGothic';
        src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_2302@1.0/BookkGothic-Bd.woff2') format('woff2');
        font-weight: 700;
        font-display: swap;
    }

    :root{
      --cell-size: 320px;
      --cell-gap:  140px;
      --cell-pad:  140px;
      --bg: #ffffff;
      --easing: cubic-bezier(.2,.8,.2,1);
      --t-panel: .55s;
      --t-fly:   .45s;
      --ink:#0a0a0a;
      --muted:#6b7280;
      --gutter: clamp(16px, 4vw, 48px);
      --z-header: 100;
      --z-overlay: 90;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;background:var(--bg);color:#121212;font-family:'SUIT-Regular',system-ui,-apple-system,Segoe UI,Roboto,sans-serif;overflow:hidden;}

    /* ===== Header / Menu ===== */
    .site-header{
      position: fixed; inset: 0 0 auto 0; height: 64px; z-index: var(--z-header);
      display: grid; grid-template-columns: 1fr 1fr; align-items: center;
      padding: 8px var(--gutter); pointer-events: none;
    }

    /* í—¤ë”(í™ˆ/ë©”ë‰´ ì•„ì´ì½˜)ë¥¼ í™”ë©´ ìƒë‹¨ì—ì„œ â†“ë¡œ ì¡°ê¸ˆ ë‚´ë¦¬ê¸° */
.site-header{
  top: 18px !important;   /* â† ë‚´ë ¤ê°€ëŠ” ì–‘: 12~28px ì‚¬ì´ë¡œ ì·¨í–¥ ì¡°ì ˆ */
  left: 0; 
  right: 0;
}

/* ì•„ì´ì½˜ì„ ì¡°ê¸ˆ ë” ì—¬ìœ  ìˆê²Œ ë³´ì´ê³  ì‹¶ìœ¼ë©´ ë²„íŠ¼ ìì²´ë„ ì‚´ì§ ë‚´ë¦¬ê¸°(ì˜µì…˜) */
.site-header .icon-btn{
  transform: translateY(2px); /* 0~6px ì‚¬ì´ë¡œ ì¡°ì ˆ */
}

    .header-left{ justify-self: start; }
    .header-right{ justify-self: end; }
    .icon-btn{
      pointer-events: auto; appearance: none; border: 0; background: transparent; cursor: pointer;
      width: 44px; height: 44px; display: inline-grid; place-items: center;
      border-radius: 999px; transition: background .2s ease;
    }
    .icon-btn:hover{ background: rgba(0,0,0,.06); }
    .icon-btn:focus-visible{ outline: 2px solid #111; outline-offset: 2px; }
    .home-svg{ width: 22px; height: 22px; fill:none; stroke:#111; stroke-width:2; }

    .menu-btn .burger{ display:grid; gap:4px; }
    .menu-btn .burger span{ width:20px; height:2px; background:#111; display:block; transition: transform .25s, opacity .25s; }
    .menu-btn[aria-expanded="true"] .burger span:nth-child(2){ opacity:0; }
    .menu-btn[aria-expanded="true"] .burger span:nth-child(1){ transform: translateY(6px) rotate(45deg); }
    .menu-btn[aria-expanded="true"] .burger span:nth-child(3){ transform: translateY(-6px) rotate(-45deg); }

    .hm-overlay{ position: fixed; inset:0; background: rgba(0,0,0,.35); display:none; z-index: var(--z-overlay); }
    .hm-overlay.open{ display:grid; place-items: stretch; }
    .hm-panel{
      margin-left:auto; width:min(500px, 90vw); height:100%;
      background:#060010; color:#fff; position:relative;
      transform: translateX(100%); transition: transform .45s cubic-bezier(.19,1,.22,1);
      box-shadow: -12px 0 24px rgba(0,0,0,.25);
    }
    .hm-overlay.open .hm-panel{ transform: translateX(0); }
    
    #react-menu-root{ height:100%; }
    .menu-items { height: 100%; }
    .fm-menu-wrap{ width:100%; height:100%; overflow:hidden; background:#060010; }
    .fm-menu{ grid-template-rows: repeat(4, 1fr); display:flex; flex-direction:column; height:100%; margin:0; padding:0; }
    .fm-menu__item{   position: relative;
  overflow: hidden;
  text-align: center;
  box-shadow: 0 -1px var(--fm-divider);
  display: grid;
  place-items: center; /* ìˆ˜ì§/ìˆ˜í‰ ì¤‘ì•™ */
  height: 100%;
  min-height: unset;   /* ë†’ì´ ê°•ì œê°’ í•´ì œ(í° í™”ë©´ì—ì„œ ìƒë‹¨ ì¹˜ìš°ì¹¨ ë°©ì§€) */}
    .fm-menu__item-link{  display: grid;
  place-items: center;
  width: 100%;
  height: 100%;
  cursor: pointer;
  text-transform: uppercase;
  text-decoration: none;
  white-space: nowrap;
  font-weight: 600;
  color: var(--fm-fg);
  font-size: clamp(18px, 4vh, 42px);
  outline: none;font-family:'BookkGothic';
      font-weight:600; color:#fff; font-size:clamp(18px,4vh,42px);}

      @media (max-height: 700px){
  .fm-menu__item{ min-height: 120px; }
}
    .fm-menu__item-link:focus-visible{ outline:2px solid #fff; outline-offset:-4px; }
    .fm-marquee{ position:absolute; inset:0; overflow:hidden; pointer-events:none; background:#fff;
      transform: translate3d(0,101%,0); transition: transform .6s cubic-bezier(.19,1,.22,1); }
    .fm-marquee__inner-wrap{ height:100%; width:200%; display:flex; transform:translateX(0); }
    .fm-marquee__inner{ display:flex; align-items:center; height:100%; width:200%; will-change:transform; animation: fm-marquee 15s linear infinite; }
    .fm-marquee span{ color:#060010; white-space:nowrap; text-transform:uppercase; font-weight:400; font-size:clamp(16px,4vh,36px); line-height:1.2; padding:1vh 1vw 0; }
    .fm-marquee__img{ width:200px; height:7vh; min-height:42px; margin:2em 2vw; padding:1em 0; border-radius:50px; background-size:cover; background-position:50% 50%; }
    @keyframes fm-marquee{ from{transform:translateX(0)} to{transform:translateX(-50%)} }
    @media (prefers-reduced-motion: reduce){ .fm-marquee__inner{ animation:none; } }

    /* ===== Explore (staggered grid) ===== */
    .pan-grid-section{position:relative;height:100vh;background:var(--bg);overflow:hidden}
    .pan-viewport{position:relative;width:100%;height:100%;overflow:hidden;cursor:grab;touch-action:none;user-select:none;-webkit-user-select:none}
    .pan-viewport.dragging{cursor:grabbing}
    .pan-canvas{position:absolute;top:0;left:0;transform:translate3d(0,0,0) scale(1);transform-origin:0 0;will-change:transform;z-index:1}
    .pan-item{position:absolute;width:var(--cell-size);height:var(--cell-size);display:flex;align-items:center;justify-content:center;cursor:pointer}
    .pan-item.is-hidden{display:none !important;}

    .pan-item img{
      height: min(280px, calc(var(--cell-size) - 40px));
      width: auto;
      max-width: min(420px, calc(var(--cell-size) + 60px));
      object-fit: contain;
      -webkit-user-drag:none; user-select:none; pointer-events:none; display:block;
      opacity: 0; transform: translateY(12px) scale(.9); filter: blur(8px);
      will-change: transform, opacity, filter;
    }
    .pan-item img.pop-seq{ animation: popIn .9s var(--delay, 0s) var(--easing) both; }
    @keyframes popIn{
      0%   { opacity:0; transform: translateY(12px) scale(.88); filter: blur(8px); }
      60%  { opacity:1; transform: translateY(-2px) scale(1.04); filter: blur(0); }
      100% { opacity:1; transform: translateY(0)   scale(1);    filter: blur(0); }
    }

    .pan-hint{
      position:absolute;right:16px;bottom:82px;display:flex;align-items:center;gap:10px;z-index:5;
      color:#666;font-size:13px
    }
    .zoom-controls{display:flex;gap:8px}
    .zoom-btn{width:32px;height:32px;border-radius:50%;border:1px solid #bdbdbd;background:transparent;display:flex;align-items:center;justify-content:center;font-size:18px;line-height:1;cursor:pointer}
    .zoom-btn:active{transform:scale(.96)}

    /* ===== Slide-in Panel ===== */
    .detail-panel{
      position:fixed;left:0;top:0;height:100vh;width:50vw;min-width:620px;
      background:rgba(247,247,236,.92);
      z-index:20; clip-path: inset(0 100% 0 0);
      transition: clip-path var(--t-panel) var(--easing); pointer-events:none;
    }
    .detail-panel.open{ clip-path: inset(0 0 0 0); pointer-events:auto; }
    .detail-panel.measuring{visibility:hidden; transition:none !important; pointer-events:none; clip-path: inset(0 0 0 0);}
    .detail-inner{height:100%;display:grid;grid-template-columns:72px 1fr;gap:28px;padding: 140px 64px 72px;color:#121212}

    .detail-title{    font-family: 'BookkMyungjo',serif;font-size:56px;line-height:1;letter-spacing:-1px;margin:0 0 24px 0;display:inline-flex;flex-wrap:wrap;gap:.02em;}
    .detail-title .mask{display:inline-block;overflow:hidden}
    .detail-title .char{display:inline-block; transform:translateY(110%);}
    .detail-panel.open .detail-title .char{animation: maskUp .6s var(--easing) var(--d,0s) both;}
    @keyframes maskUp{from{transform:translateY(110%)} to{transform:translateY(0%)}}

    .detail-panel .detail-hero,.detail-panel .detail-meta,.detail-panel .detail-cta,.detail-panel .thumbs{transform:translateY(10px);transition: transform .45s var(--easing);}
    .detail-panel.open .detail-hero{ transform:none; transition-delay:.08s; }
    .detail-panel.open .detail-meta{ transform:none; transition-delay:.12s; }
    .detail-panel.open .thumbs    { transform:none; transition-delay:.14s; }
    .detail-panel.open .detail-cta{ transform:none; transition-delay:.18s; }

    .detail-hero {
      position: absolute; /* ê²¹ì¹˜ê¸° ìœ„í•´ absoluteë¡œ ë³€ê²½ */
      top: 104px; /* ì œëª© ë†’ì´ì— ë§ì¶° ì¡°ì • */
      max-width: 420px;
      max-height: 350px;
      width: 100%;
      height: auto;
      object-fit: contain;
      display: block;
      margin-bottom: 16px;
      transition: opacity 0.6s ease-in-out; /* ë¶€ë“œëŸ¬ìš´ ì „í™˜ íš¨ê³¼ */
    }
    .detail-meta{color:#666;margin-top:14px}
    .detail-description {
      font-family:'SUIT-Regular';
      color: #333;
      font-size: 15px;
      line-height: 1.7;
      margin-top: 370px; /* ì´ë¯¸ì§€ ë†’ì´ë§Œí¼ ê³µê°„ í™•ë³´ */
      margin-bottom: 24px;
      flex-grow: 1;
      overflow-y: auto;
      /* â–¼ ë²„íŠ¼ì²˜ëŸ¼ ë³´ì´ë„ë¡ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ â–¼ */
  display: inline-block; /* ë‚´ìš©ë§Œí¼ë§Œ ê°ì‹¸ë„ë¡ ë³€ê²½ */
  border: 1px solid #ddd; /* ì–‡ì€ ì‚¬ê°í˜• ì„  */
  padding: 6px 12px; /* ë‚´ë¶€ ì—¬ë°± */
  border-radius: 8px; /* ë‘¥ê·¼ ëª¨ì„œë¦¬ */
  font-size: 13px; /* í°íŠ¸ í¬ê¸° ì‚´ì§ ì¤„ì„ */
  background-color: rgba(0, 0, 0, 0.02); /* ë¯¸ì„¸í•œ ë°°ê²½ìƒ‰ */
    }
    .detail-cta{margin-top:auto;display:none;align-items:center;gap:8px;background:#121212;color:#fff;border:none;border-radius:12px;padding:10px 14px;font-size:13px;cursor:pointer}
    
    .thumbs{display:flex;flex-direction:column;gap:12px}
    .thumb {
      width: 64px;
      height: 64px;
      padding: 4px;
      border: 1px solid #e0e0d6;
      border-radius: 4px;
      background: #fff;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
    }
    .thumb img{
      max-width: 100%;
      max-height: 100%;
      width:auto; height:auto;
      object-fit:contain;
      display:block;
    }

    .detail-body{display:flex;flex-direction:column; position: relative;}
    .detail-close{position:absolute;right:-6px;top:12px;background:transparent;border:none;color:#333;font-size:22px;cursor:pointer}

    .fly-clone {
      position: fixed;
      z-index: 9999;
      pointer-events: none;
      transition: all var(--t-fly) var(--easing);
      overflow: hidden;
    }
    .fly-clone img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }

    /* â—FIX: í•„í„° ë²„íŠ¼ì´ ë³´ì´ë„ë¡ display: none ì œê±° */
    .filter-wrap{
      position:fixed;left:16px;bottom:16px;z-index:10;
      display:flex;align-items:center;gap:10px;
      height:38px;
    }
    .filter-toggle{ display:flex;align-items:center;border:none;background:transparent;padding:0;cursor:pointer; }
    .seg{
      display:flex;align-items:center;gap:10px;height:38px;padding:0 12px;background:rgba(255,255,255,.82);
      border:1px solid rgba(0,0,0,.10);
      box-shadow:0 6px 22px rgba(0,0,0,.06);
    }
    .seg:first-child{border-right:none;border-radius:10px 0 0 10px}
    .seg:last-child{border-radius:0 10px 10px 0}
    .seg-icon{width:38px;justify-content:center}
    .seg-label{font-size:13px;color:#222}
    .eq{width:18px;height:18px;display:block}
    .filter-bar{
      display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.82);border:1px solid rgba(0,0,0,.10);
      border-radius:999px;padding:0 8px;height:38px;
      box-shadow:0 6px 22px rgba(0,0,0,.06);
      overflow:hidden;max-width:0;opacity:0;transform:translateX(-8px);
      transform-origin:left center;
      transition: max-width .5s var(--easing), opacity .35s var(--easing), transform .5s var(--easing);
      pointer-events:none;
    }
    .filter-wrap.open .filter-bar{max-width:100vw;opacity:1;transform:translateX(0);pointer-events:auto}
    .filter-close{
      width:38px;height:30px;border-radius:999px;border:1px solid rgba(0,0,0,.10);background:transparent;cursor:pointer;font-size:16px;color:#222
    }
    .chip{
      appearance:none;border:1px solid rgba(0,0,0,.10);background:transparent;border-radius:10px;
      padding:8px 12px;font-size:13px;color:#222;cursor:pointer;opacity:0;transform:translateY(6px);
      transition:opacity .4s var(--easing), transform .45s var(--easing), background .2s ease, color .2s ease, border-color .2s ease;
      line-height:1;
    }
    .filter-wrap.open .chip{opacity:1;transform:translateY(0)}
    .chip[aria-pressed="true"]{background:#121212;color:#fff;border-color:#121212}
    .chip .plus{opacity:.7;margin-left:4px}
    .chip[data-i="0"]{transition-delay:.05s}
    .chip[data-i="1"]{transition-delay:.10s}
    .chip[data-i="2"]{transition-delay:.15s}
    .chip[data-i="3"]{transition-delay:.20s}

    @media (prefers-reduced-motion: reduce){
      .filter-bar,.chip{transition:none !important;transform:none !important;opacity:1 !important}
    }
    @media (max-width:1200px){ :root{ --cell-size: 300px; --cell-gap:110px; --cell-pad:110px } .detail-panel{min-width:auto;width:60vw} .detail-title{font-size:46px} .detail-hero{max-width:min(60vw - 140px, 420px)} }
    @media (max-width:900px) { :root{ --cell-size: 260px; --cell-gap: 90px; --cell-pad: 90px } .detail-title{font-size:38px} .detail-inner{padding:36px 32px;grid-template-columns:56px 1fr;gap:20px} .pan-hint{bottom:90px} }
    @media (max-width:600px){
      :root{ --cell-size: 220px; --cell-gap: 88px; --cell-pad: 72px }
      .detail-panel{width:100vw;min-width:0;background:rgba(247,247,236,.96)}
      .detail-inner{padding:18px 16px;display:flex;flex-direction:column}
      .detail-title{font-size:30px;margin:8px 0 16px}
      .detail-hero{width:min(78vw,360px); position:static; /* ëª¨ë°”ì¼ì—ì„œëŠ” ë‹¤ì‹œ staticìœ¼ë¡œ */}
      .detail-description { margin-top: 20px; /* ëª¨ë°”ì¼ì—ì„œëŠ” margin-top ì›ë³µ */}
      .thumbs{flex-direction:row;gap:10px;order:3;overflow-x:auto;padding-bottom:6px}
      .detail-body{order:2; position: static;}
    }
    #panCanvas { will-change: transform; }
    .pan-item { position: absolute; }
    .pan-item img{
      transform-origin: center;
      transition: transform .35s cubic-bezier(.22,1,.36,1), filter .35s ease, opacity .35s ease;
    }
    .pan-item:hover img{
      transform: translateY(0) scale(1.06);
    }
    .hover-label{
      position: fixed;
      left: 0; top: 0;
      z-index: 9999;
      pointer-events: none;
      opacity: 0;
      padding: 6px 10px;
      font-size: 12px;
      font-weight: 600;
      line-height: 1;
      color: #fff;
      background: rgba(0,0,0,.85);
      border-radius: 8px;
      box-shadow: 0 8px 24px rgba(0,0,0,.2);
      transform: translate(-50%, calc(-100% - 10px)) scale(.98);
      transition: opacity .18s ease, transform .18s ease;
      white-space: nowrap;
    }
    .hover-label::before{ content: "+"; margin-right: 6px; }
    .hover-label.show{
      opacity: 1;
      transform: translate(-50%, calc(-100% - 10px)) scale(1);
    }

    /* ===== explore.html â€” 4K Desktop Responsive Patch (ë¶™ì—¬ë„£ê¸° ì „ìš©) ===== */
@media (min-width: 1600px){
  :root{
    /* ê·¸ë¦¬ë“œ íƒ€ì¼/ê°„ê²©/íŒ¨ë”©ì„ í™”ë©´ ë¹„ë¡€ ê°’ìœ¼ë¡œ ìƒí–¥ */
    --cell-size: clamp(360px, 18vw, 520px);
    --cell-gap:  clamp(120px, 6vw, 220px);
    --cell-pad:  clamp(120px, 8vw, 320px);
  }
  

  /* í—¤ë”/ì•„ì´ì½˜ ì•½ê°„ í‚¤ìš°ê¸° */
  .site-header{ height:72px; padding:10px max(24px, 4vw); top: 20px;}
  .icon-btn{ width:52px; height:52px; }
  .home-svg{ width:24px; height:24px; }

  /* ë“œë˜ê·¸ íŒíŠ¸/ì¤Œ ë²„íŠ¼ ë¹„ë¡€ í™•ëŒ€ */
  .pan-hint{ right:max(16px,2vw); bottom:max(82px,3vh); font-size:clamp(13px, .9vw, 18px); }
  .zoom-btn{ width:clamp(32px, 2.2vw, 44px); height:clamp(32px, 2.2vw, 44px); font-size:clamp(18px, 1.2vw, 22px); }

  /* ì¸ë„¤ì¼(ê·¸ë¦¬ë“œ ì•„ì´í…œ) ì´ë¯¸ì§€ë„ ë¹„ë¡€ í™•ëŒ€ */
  .pan-item img{
    height:    min(420px, calc(var(--cell-size) - 48px));
    max-width: min(680px, calc(var(--cell-size) + 160px));
  }

  /* ìƒì„¸ íŒ¨ë„(ìŠ¬ë¼ì´ë“œ ì¸) ë¹„ìœ¨/ì—¬ë°±/íƒ€ì´í¬ ì¡°ì • */
  .detail-panel{ width: min(44vw, 1400px); } /* ë„ˆë¬´ ë„“ì§€ ì•Šê²Œ ìƒí•œ */
  .detail-inner{ grid-template-columns:96px 1fr; gap:clamp(24px,2vw,36px);
                 padding: clamp(40px,4vh,72px) clamp(36px,3.2vw,64px); }
  .thumb{ width:clamp(64px,4.6vw,96px); height:clamp(64px,4.6vw,96px); }

  .detail-title{ font-size: clamp(48px, 3.2vw, 72px); }
  .detail-meta{  font-size: clamp(14px, .95vw, 18px); }

  /* íˆì–´ë¡œ ì´ë¯¸ì§€ì™€ ë³¸ë¬¸ ê°„ê²©ì„ í™”ë©´ë¹„ë¡€ë¡œ */
  .detail-hero{
    top:        clamp(84px, 11vh, 140px);
    max-width:  clamp(420px, 28vw, 760px);
    max-height: clamp(350px, 34vh, 640px);
  }
  .detail-description{
    font-size: clamp(15px, 1.05vw, 18px);
    margin-top: clamp(360px, 32vh, 640px);
  }

  /* í•„í„° UI(ì¹©/ë°”)ë„ UHDì—ì„œ ì†ë§› ì¢‹ê²Œ */
  .filter-wrap{ left:max(16px,2vw); bottom:max(16px,2.2vh); }
  .filter-bar{ height: clamp(38px, 3.2vh, 52px); }
  .chip{
    font-size: clamp(13px, .95vw, 18px);
    padding: clamp(8px, .7vw, 12px) clamp(12px, 1vw, 16px);
  }
  .filter-close{ width:clamp(38px,3vw,52px); height:clamp(30px,2.4vw,44px); }
}

/* 2560px+ (UHD ì´ìƒ)ì—ì„œ ì¡°ê¸ˆ ë” ì—¬ìœ ë¡­ê²Œ */
@media (min-width: 2560px){
  :root{
    --cell-size: clamp(440px, 20vw, 640px);
    --cell-gap:  clamp(140px, 6.5vw, 260px);
    --cell-pad:  clamp(160px, 9vw, 360px);
  }
  .detail-panel{ width: min(40vw, 1500px); }
}

/* ë©”ë‰´(í–„ë²„ê±°) ë§ˆí‚¤ íƒ€ì´í¬ ìŠ¤ì¼€ì¼ ì¡°ì • */
@media (min-width: 1600px){
  .fm-menu__item-link{ font-size: clamp(22px, 2.6vh, 46px); }
  .fm-marquee span{     font-size: clamp(18px, 2.2vh, 40px); }
  .fm-marquee__img{     height:  clamp(56px, 8vh, 120px); }
}

/* === Controls Height Unify (Filter = Zoom) === */
.filter-bar,
.seg,
.seg-icon,
.zoom-btn { height: 38px; }

.zoom-btn {
  width: 38px;           /* ì •ì›(ë™ê·¸ë¼ë¯¸) í¬ê¸°ë„ 38pxë¡œ ë§ì¶¤ */
  font-size: 18px;       /* ì•„ì´ì½˜ í¬ê¸° ìœ ì§€ */
  line-height: 38px;     /* ìˆ˜ì§ ì¤‘ì•™ ë³´ì •(ë¸Œë¼ìš°ì €ë³„) */
}

/* í° í™”ë©´(UHD í¬í•¨)ì—ì„œë„ ê³ ì • 38px ìœ ì§€ â€” ìœ„ ê°’ì´ í•­ìƒ ìš°ì„ ë˜ë„ë¡ ë‹¤ì‹œ ì§€ì • */
@media (min-width: 1600px){
  .zoom-btn { width: 38px; height: 38px; font-size: 18px; }
  .filter-bar { height: 38px; }
  .seg, .seg-icon { height: 38px; }
}
/* =========================================================
   iMac 24â€³ ë ˆì´ì•„ì›ƒ Fix
   - ìƒì„¸ íŒ¨ë„ ë” ë„“ê²Œ
   - í° í™”ë©´ì—ì„œë§Œ íˆì–´ë¡œ ì´ë¯¸ì§€ë¥¼ 'íë¦„(static)'ìœ¼ë¡œ ë‘ì–´ ê²¹ì¹¨ ë°©ì§€
   - ë³¸ë¬¸ì€ ìë™ìœ¼ë¡œ ë‚¨ì€ ë†’ì´ì—ì„œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥
   ========================================================= */
@media (min-width: 1600px) and (min-height: 900px){
  /* íŒ¨ë„ í­ í™•ì¥ (ê¸°ì¡´ min(44vw,1400px) â†’ ë” ë„“ê²Œ) */
  .detail-panel{
    width: min(56vw, 1680px);
  }

  /* íŒ¨ë„ ë‚´ë¶€ ì—¬ë°±/ê·¸ë¦¬ë“œ ìƒí–¥ + ë‚´ìš©ì´ ìœ„ë¡œ ëª°ë¦¬ì§€ ì•Šë„ë¡ ìœ„ìª½ ì—¬ë°± ì¦ê°€ */
  .detail-inner{
    grid-template-columns: 112px 1fr;                     /* ì¸ë„¤ì¼ ì—´ ì•½ê°„ ë„“í˜ */
    gap: clamp(24px, 2.2vw, 40px);
    /* [ìˆ˜ì •] padding-topì„ ëŠ˜ë ¤ ì½˜í…ì¸ ë¥¼ ì•„ë˜ë¡œ ë‚´ë¦½ë‹ˆë‹¤ */
    padding-top: clamp(140px, 15vh, 200px); /* ğŸ‘ˆ ìƒë‹¨ ì—¬ë°± (ì˜ˆ: 140px ~ 200px) */
    padding-bottom: clamp(64px, 7vh, 112px); /* ğŸ‘ˆ í•˜ë‹¨ ì—¬ë°± (ê¸°ì¡´ ê°’ ìœ ì§€) */
    padding-left: clamp(48px, 3.4vw, 80px); /* ğŸ‘ˆ ì¢Œì¸¡ ì—¬ë°± (ê¸°ì¡´ ê°’ ìœ ì§€) */
    padding-right: clamp(48px, 3.4vw, 80px); /* ğŸ‘ˆ ìš°ì¸¡ ì—¬ë°± (ê¸°ì¡´ ê°’ ìœ ì§€) */
    align-content: start;                                  /* ë‚´ìš©ì´ ìƒë‹¨ì— ë‹¬ë¼ë¶™ì§€ ì•Šê²Œ ì •ë¦¬ */
  }

  .detail-title{
    font-size: clamp(52px, 3.4vw, 76px);
    line-height: 1.06;
    margin: 0 0 18px 0;
  }

  /* âš ï¸ ê²¹ì¹¨ ì›ì¸ ì œê±°: í° í™”ë©´ì—ì„œëŠ” íˆì–´ë¡œ ì´ë¯¸ì§€ë¥¼ ì ˆëŒ€ë°°ì¹˜ â†’ ì •ì ë°°ì¹˜ë¡œ ë³€ê²½ */
  .detail-hero{
    position: static;          /* â† í•µì‹¬! (ê¸°ì¡´ absoluteë¥¼ ì´ êµ¬ê°„ì—ì„œë§Œ í•´ì œ) */
    width: 100%;
    max-width: clamp(520px, 34vw, 840px);
    max-height: none;
    margin: 8px 0 18px;        /* ì œëª©ê³¼ ë³¸ë¬¸ ì‚¬ì´ ì ë‹¹í•œ ê°„ê²© */
    object-fit: contain;
  }

  /* ë³¸ë¬¸: ì ˆëŒ€ë°°ì¹˜ê°€ ì‚¬ë¼ì¡Œìœ¼ë‹ˆ ìœ„ ì—¬ë°±ì„ 0ìœ¼ë¡œ */
  .detail-description{
    margin-top: 0;             /* â† ê¸°ì¡´ 370px ì œê±° */
    font-size: clamp(15px, 1.05vw, 18px);
    line-height: 1.7;        /* íŒ¨ë„ ë†’ì´ ë‚´ì—ì„œ ìì—° ìŠ¤í¬ë¡¤ */
    overflow-y: visible;
  }

  /* ë³¸ë¬¸ ë˜í¼ë¥¼ gridë¡œ ë¬¶ì–´ 'ì´ë¯¸ì§€/ë©”íƒ€/ë³¸ë¬¸/CTA' ìˆœìœ¼ë¡œ ì•ˆì „ ë°°ì¹˜ */
  .detail-body{
    display: grid;
 grid-template-rows: auto auto auto auto; /* ì œëª©ì€ ì´ë¯¸ ë°”ê¹¥, ì—¬ê¸°ì„œë¶€í„°: ì´ë¯¸ì§€, ë©”íƒ€, ë³¸ë¬¸(ê°€ë³€), CTA */
    min-height: 0;                           /* ì˜¤ë²„í”Œë¡œìš° ê³„ì‚° ì •í™•ë„ â†‘ */
  }

  /* ì¸ë„¤ì¼ ë°•ìŠ¤ë„ í° í™”ë©´ì—ì„œ ì‚´ì§ í‚¤ì›€ */
  .thumb{ width: clamp(72px, 5vw, 104px); height: clamp(72px, 5vw, 104px); }
}

/* ì•„ì£¼ í° í™”ë©´(UHD 2560px+)ì—ì„œëŠ” íŒ¨ë„ì„ í•œ ë‹¨ê³„ ë” ì—¬ìœ ë¡­ê²Œ */
@media (min-width: 2560px){
  .detail-panel{ width: min(52vw, 1760px); }
}

@media (min-width: 1600px) {
  .detail-panel {
    width: min(54vw, 1500px);
    background: rgba(247,247,236,0.95);
    height: 100vh;
    display: flex;
    /* [ìˆ˜ì • 1] align-items: center; ë¥¼ flex-startë¡œ ë³€ê²½ */
    align-items: flex-start;
    justify-content: center;
    /* [ìˆ˜ì • 1] padding-topì„ ì¶”ê°€í•˜ì—¬ ì½˜í…ì¸ ë¥¼ ì•„ë˜ë¡œ ë‚´ë¦¼ */
    padding-top: clamp(40px, 5vh, 80px);
    overflow-y: auto;
  }

  .detail-inner {
    grid-template-columns: 120px 1fr;
    gap: 48px;
    padding: 72px 64px;
  }

  /* âœ… íˆì–´ë¡œ ì´ë¯¸ì§€ í¬ê¸° ê³ ì • (27ì¸ì¹˜ ê¸°ì¤€) */
  .detail-hero {
    position: static; /* ì ˆëŒ€ ë°°ì¹˜ ì œê±° â€” ìì—°ìŠ¤ëŸ½ê²Œ íë¦„ì— í¬í•¨ */
    width: 600px;
    height: 450px;
    object-fit: contain;
    display: block;
    margin: 20px 0 40px 0;
    transform: none;
    left: auto;
  }

  /* âœ… ì œëª©ê³¼ ì„¤ëª… ê°„ê²© ì—¬ìœ  ìˆê²Œ */
  .detail-title {
    font-size: 60px;
    line-height: 1.1;
    margin-bottom: 24px;
  }

  /* âœ… ë³¸ë¬¸ ì˜ì—­ë„ ì—¬ìœ ìˆê²Œ í™•ì¥ */
  .detail-description {
    margin-top: 0;
    font-size: 18px;
    line-height: 1.8;
    max-width: 800px;
    color: #333;
  }

  /* ì¸ë„¤ì¼ë„ ì•½ê°„ í‚¤ì›€ */
  .thumb {
    width: 84px;
    height: 84px;
  }

  /* [ìˆ˜ì • 2] 27ì¸ì¹˜ ëª¨ë‹ˆí„°ì—ì„œ X ë²„íŠ¼ ìœ„ì¹˜ ì¡°ì • */
  .detail-close {
    right: 24px; /* -6px (ë°”ê¹¥)ì—ì„œ 24px (ì•ˆìª½)ìœ¼ë¡œ ë³€ê²½ */
    top: 24px;   /* 12pxì—ì„œ 24pxë¡œ ìƒë‹¨ ì—¬ë°± í™•ë³´ */
  }
}



  </style>

  <script defer src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
</head>
<body>

<header class="site-header" role="banner">
  <div class="header-left">
    <a class="icon-btn" href="index.html" aria-label="Home">
      <svg class="home-svg" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M3 10.5 12 3l9 7.5M5 9.5V21h14V9.5" />
      </svg>
    </a>
  </div>
  <div class="header-right">
    <button id="menuBtn" class="icon-btn menu-btn" type="button" aria-expanded="false" aria-controls="menuPanel" aria-label="Open menu">
      <span class="burger"><span></span><span></span><span></span></span>
    </button>
  </div>
</header>
<div id="menuOverlay" class="hm-overlay" aria-hidden="true">
  <aside id="menuPanel" class="hm-panel" role="dialog" aria-modal="true" aria-label="Navigation menu">
    <div class="menu-items"><div id="react-menu-root"></div></div>
  </aside>
</div>

  <section id="explore" class="pan-grid-section">
    <div class="pan-viewport" id="panViewport">
      <div class="pan-canvas" id="panCanvas">
        <div class="pan-item"><img src="img/gong/back/1.webp"  alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/4.webp"  alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/p.webp"       alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/ccc.webp"     alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/a1.webp"      alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/9.webp"       alt="Baekja"></div>
        <div class="pan-item"><img src="img/gong/back/crafts.webp"       alt="Baekja"></div>         
        <div class="pan-item"><img src="img/gong/back/peach.webp"       alt="Baekja"></div>       
        <div class="pan-item"><img src="img/gong/back/15.webp"       alt="Baekja"></div>              
        <div class="pan-item"><img src="img/gong/back/13.webp"       alt="Baekja"></div> 
        <div class="pan-item"><img src="img/gong/back/12.webp"       alt="Baekja"></div> 

        <div class="pan-item"><img src="img/gong/ch/1.webp" alt="Celadon"></div>
        <div class="pan-item"><img src="img/gong/ch/ch1.webp" alt="Celadon"></div>
        <div class="pan-item"><img src="img/gong/ch/ch4.webp" alt="Celadon"></div>                                
        <div class="pan-item"><img src="img/gong/ch/6.webp" alt="Celadon"></div>
        <div class="pan-item"><img src="img/gong/ch/8.webp" alt="Celadon"></div>
        <div class="pan-item"><img src="img/gong/ch/h.webp" alt="Celadon"></div>       
        <div class="pan-item"><img src="img/gong/ch/33.webp" alt="Celadon"></div>       
        <div class="pan-item"><img src="img/gong/ch/ch9.webp" alt="Celadon"></div> 
        
        <div class="pan-item"><img src="img/gong/na/1.webp" alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/2.webp" alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/3.webp" alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/4.webp" alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/5.webp"    alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/6.webp"    alt="Najeon"></div>
        <div class="pan-item"><img src="img/gong/na/7.webp"    alt="Najeon"></div> 
        <div class="pan-item"><img src="img/gong/na/8.webp"    alt="Najeon"></div>               
      </div>

      <div class="pan-hint">
        <span>â¤§ Drag / Pinch / Wheel</span>
        <div class="zoom-controls">
          <button class="zoom-btn" id="zoomOut" aria-label="zoom out">âˆ’</button>
          <button class="zoom-btn" id="zoomIn"  aria-label="zoom in">+</button>
        </div>
      </div>
    </div>
  </section>

  <aside class="detail-panel" id="detailPanel" aria-hidden="true">
    <button class="detail-close" id="detailClose" aria-label="close">Ã—</button>
    <div class="detail-inner">
      <div class="thumbs" id="detailThumbs"></div>
      <div class="detail-body" id="detailBody">
        <h1 class="detail-title" id="detailTitle">Wisteria</h1>
        <img class="detail-hero" id="detailHero" src="img/gong/back/1.webp" alt="">
        <div class="detail-meta" id="detailMeta">Deep Plate Â· Ã˜ 22</div>
        <p class="detail-description" id="detailDescription"></p>
        <button class="detail-cta" id="detailCTA">explore collection</button>
      </div>
    </div>
  </aside>

  <div class="filter-wrap" id="filterWrap">
    <button class="filter-toggle" id="filterToggle" aria-expanded="false" aria-controls="filterBar">
      <div class="seg seg-icon" aria-hidden="true">
        <svg class="eq" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="4" y1="7"  x2="14" y2="7" />
          <circle cx="16" cy="7" r="2"/>
          <line x1="4" y1="17" x2="10" y2="17" />
          <circle cx="12" cy="17" r="2"/>
          <line x1="4" y1="12" x2="8" y2="12" />
          <circle cx="10" cy="12" r="2"/>
        </svg>
      </div>
      <div class="seg seg-label"><span>filter</span></div>
    </button>

    <div class="filter-bar" id="filterBar" role="toolbar" aria-label="collection filters" aria-hidden="true">
      <button class="filter-close" id="filterClose" aria-label="close">Ã—</button>
      <button class="chip" data-filter="all"      data-i="0" aria-pressed="true">ì „ì²´<span class="plus"> +</span></button>
      <button class="chip" data-filter="baekja"   data-i="1">ë°±ì<span class="plus"> +</span></button>
      <button class="chip" data-filter="cheongja" data-i="2">ì²­ì<span class="plus"> +</span></button>
      <button class="chip" data-filter="najeon"   data-i="3">ë‚˜ì „ì¹ ê¸°<span class="plus"> +</span></button>
    </div>
  </div>

<script>
(function(){
  const imageData = [
    { src: "img/gong/back/1.webp", title: "ë°±ì ì£¼ì „ì", meta: "ç™½ç£æ³¨å­", description: "ì´ ì£¼ì „ìëŠ” ê²½ë•ì§„ìš”(æ™¯å¾·é­çª¯)ì—ì„œ ì œì‘í•œ ê²ƒìœ¼ë¡œ ë´‰í™©ì˜ ë¨¸ë¦¬ê°€ ì… ë‘˜ë ˆì— ì¥ì‹ë˜ì–´ ìˆë‹¤. ë°±ìì— ë´‰í™©ì„ ê·¸ë ¤ ë„£ëŠ” ê²ƒì€ ë‚˜ë¼ì˜ í‰í™”, ì™•ì‹¤ì˜ ë²ˆì˜, ì„¸ìƒì˜ ì¡°í™”ë¥¼ ê¸°ì›í•˜ëŠ” ì˜ë¯¸ê°€ ìˆë‹¤.", thumbs: ["img/gong/back/1.webp", "img/gong/back/2.webp"] },
    { src: "img/gong/back/4.webp", title: "ë°±ììŒê°ìƒˆëª¨ì–‘ì”", meta: "ç™½ç£é™°åˆ»é³¥å½¢ç›", description: "ë™ë¬¼ í˜•ìƒì˜ ì”ì€ ì¡°ì„  ë°±ìì—ì„œëŠ” ë“œë¬¼ë©°, íŠ¹íˆ ìƒˆ ëª¨ì–‘ì€ ìƒì§•ì  ì˜ë¯¸ê°€ ê°•í•˜ë‹¤. ìƒˆëŠ” ë³´í†µ ììœ , ê³ ê²°í•¨, ì†Œë§ ë“±ì„ ì˜ë¯¸í•˜ë©°, ì„ ë¹„ë“¤ì˜ ì´ìƒì ì¸ ì •ì‹ ì„¸ê³„ë¥¼ íˆ¬ì˜í•œ ìƒì§•ì´ê¸°ë„ í•˜ë‹¤.", thumbs: ["img/gong/back/3.webp", "img/gong/back/4.webp"] },
    { src: "img/gong/back/p.webp", title: "ì²­í™”ë°±ì ì–´ë¬¸í•„í†µ", meta: "é‘è¯ç™½ç£æ¼æ–‡ç­†ç­’", description: "ë¬¼ì†ì—ì„œë„ ììœ ë¡­ê²Œ ìœ ì˜í•˜ëŠ” ë¬¼ê³ ê¸°ëŠ” ì´ëª…í•˜ê³  ë¯¼ì²©í•œ ì§€í˜œì˜ ìƒì§•ìœ¼ë¡œ ì—¬ê²¨ì¡Œë‹¤. ì´ëŸ¬í•œ ëœ»ì€ ì„ ë¹„ë“¤ì˜ ì´ìƒ, ì¦‰ ê³¼ê±°ì— ê¸‰ì œí•˜ê³  ì…ì‹ ì–‘ëª…í•˜ê¸¸ ë°”ë¼ëŠ” ë§ˆìŒê³¼ ì—°ê²°ëœë‹¤.", thumbs: ["img/gong/back/p.webp"] },
    { src: "img/gong/back/ccc.webp", title: "ë°±ì ì²­í™” ìš´ë£¡ë¬¸", meta: "ç™½ç£ é‘ç•µ é›²é¾æ–‡ è§’åŒ™", description: "ì „í†µì ì¸ ì¡°ì„  ë°±ìì—ëŠ” ë³¼ ìˆ˜ ì—†ë˜ ì´êµ­ì ì¸ ë¬´ëŠ¬ê°€ í‘œí˜„ëœ ì ‘ì‹œì´ë‹¤.", thumbs: ["img/gong/back/ccc.png", "img/gong/back/cc.png"] },
    { src: "img/gong/back/a1.webp", title: "ë°±ì ì²­í™” íƒœê·¹ íŒ”ê´˜ë¬´ëŠ¬ ì—°ì ", meta: "ç™½ç£é‘ç•µå¤ªæ¥µå…«å¦æ–‡ç¡¯æ»´", description: "ì´ í˜•ì‹ì˜ íƒœê·¹ë¬´ëŠ¬ëŠ” ì†¡(å®‹)ë‚˜ë¼ì˜ ìœ í•™ì ì£¼ëˆì´ê°€ ì§€ì€ ã€íƒœê·¹ë„ì„¤(å¤ªæ¥µåœ–èªª)ã€ì—ì„œ ìµœì´ˆë¡œ ë‚˜íƒ€ë‚˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ê³  ìˆë‹¤. ì£¼ëˆì´ê°€ ì‚¬ìš©í•œ ì´ í˜•ì‹ì˜ íƒœê·¹ë¬¸ì€ ì£¼ë¡œ ìœ í•™ìë“¤ì´ ìš°ì£¼ ë§Œë¬¼ ë° ì‹¬ì„± ë“±ì„ ì„¤ëª…í•  ë•Œ ìì£¼ ê±°ë¡ í•˜ì˜€ë‹¤.", thumbs: ["img/gong/back/a1.webp", "img/gong/back/a2.webp"] },
    { src: "img/gong/back/9.webp", title: "ë°±ì ì²­í™” ëª¨ë€ë¬´ëŠ¬ ì‚¬ë°œ", meta: "ç™½ç£é‘ç•µç‰¡ä¸¹æ–‡æ²™é‰¢", description: "ì¡°ì„  ì‹œëŒ€ì— ëª¨ë€ì€ ê·€í•œ ì‹ ë¶„ê³¼ ë³µëœ ì‚¶ì„ ê¸°ì›í•˜ëŠ” ì˜ë¯¸ì˜€ë‹¤. íŠ¹íˆ ì™•ì‹¤ì´ë‚˜ ìƒë¥˜ì¸µì´ ì‚¬ìš©í•˜ëŠ” ê¸°ë¬¼ì—ì„œ ìì£¼ ë‚˜íƒ€ë‚¬ë‹¤.", thumbs: ["img/gong/back/9.webp", "img/gong/back/10.webp"] },
    { src: "img/gong/back/crafts.webp", title: "ì²­í™”ë°±ììš´ë£¡ë¬¸í˜¸", meta: "é‘ç•µç™½ç£é›²ï§„æ–‡å£º", description: "ìš©ì€ í•˜ëŠ˜ê³¼ ë•…, ë°”ë‹¤ë¥¼ ëª¨ë‘ ë‹¤ìŠ¤ë¦´ ìˆ˜ ìˆëŠ” ì¡´ì¬ë¡œ ì¸ì‹ë˜ì—ˆìœ¼ë©°, ì„ê¸ˆì´ ì²œì(å¤©å­, í•˜ëŠ˜ì˜ ì•„ë“¤)ë¡œì„œ ì„¸ìƒì„ ë‹¤ìŠ¤ë¦´ ì •ë‹¹ì„±ì„ ìƒì§•í–ˆë‹¤.", thumbs: ["img/gong/back/crafts.webp"] },
    { src: "img/gong/back/peach.webp", title: "ë°±ì ì²­í™” ë³µìˆ­ì•„ ëª¨ì–‘ ì—°ì ", meta: "ç™½ç£ æ¡ƒå½¢ ç¡¯æ»´", description: "ë³µìˆ­ì•„ì˜ íŠ¹ì§•ì„ ì˜ ë‚˜íƒ€ë‚¸ ì—°ì ì´ë‹¤. ë³µìˆ­ì•„ëŠ” ì „í†µì ìœ¼ë¡œ ë‹¤ì–‘í•œ ì˜ë¯¸ë¥¼ ì§€ë‹ˆê³  ìˆëŠ”ë°, â€²ì„œì™•ëª¨(è¥¿ç‹æ¯) ì „ì„¤â€²ì˜ ì˜í–¥ìœ¼ë¡œ ë‹¤ìˆ˜(å¤šå£½)ë¥¼ ì˜ë¯¸í•˜ë©° í•œí¸ìœ¼ë¡œ ì•„ë“¤ê³¼ ë‹¤ë‚¨(å¤šç”·)ì„ ìƒì§•í•˜ê¸°ë„ í•œë‹¤.", thumbs: ["img/gong/back/peach.webp", "img/gong/back/peach2.webp","img/gong/back/peach3.webp"] },
    { src: "img/gong/back/15.webp", title: "ë°±ì ì²­í™” íˆ¬ê° í¬ë„ë¬´ëŠ¬ ì§€í†µ", meta: "ç™½ç£é‘ç•µé€åˆ»è‘¡è„æ–‡ç´™ç­’", description: "í¬ë„ì†¡ì´ì˜ ì•Œì´ ê½‰ ì°¬ ëª¨ìŠµì€ í’ìš”ì™€ ì¬ë¬¼ì˜ ìƒì§•ìœ¼ë¡œ ì—¬ê²¨ì¡Œë‹¤. ë”°ë¼ì„œ í¬ë„ë¬´ëŠ¬ëŠ” í’ìš”ë¡œìš´ ì‚¶, í–‰ë³µì´ ê°€ë“í•œ ì§‘ì•ˆì„ ê¸°ì›í•˜ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©ë˜ì—ˆë‹¤.", thumbs: ["img/gong/back/15.webp", "img/gong/back/16.webp"] },
    { src: "img/gong/back/13.webp", title: "ë°±ì ê°í™” ì¸ë¬¼ íŒŒë„ ë¬´ëŠ¬ ì™„", meta: "ç™½ç£é™½åˆ»äººç‰©æ³¢ï§ºæ–‡ç¢—", description: "íŒŒë„ë¬´ëŠ¬ëŠ” ëŠì„ì—†ì´ ë°€ë ¤ì˜¤ëŠ” ë¬¼ê²°ì„ í‘œí˜„í•œ ê²ƒìœ¼ë¡œ, ëŠì´ì§€ ì•ŠëŠ” ë³µ(ç¦), í’ìš”ë¡œì›€ì„ ìƒì§•í•œë‹¤. íŠ¹íˆ ì¡°ì„ ì‹œëŒ€ì—ëŠ” íŒŒë„ë¬´ëŠ¬ê°€ ê³¡ì‹, ì¬ë¬¼, ë³µì´ ëŠì´ì§€ ì•Šê³  ë“¤ì–´ì˜¨ë‹¤ëŠ” ëœ»ìœ¼ë¡œ ì—¬ê²¨ì ¸ ë²ˆì˜ê³¼ ë‹¤ë³µì„ ê¸°ì›í•˜ëŠ” ê¸¸ìƒ ë¬¸ì–‘ìœ¼ë¡œ ì¦ê²¨ ì‚¬ìš©ë˜ì—ˆë‹¤.", thumbs: ["img/gong/back/7.webp","img/gong/back/8.webp"] },
    { src: "img/gong/back/12.webp", title: "ë°±ì ì²­í™” ì¥ìƒ ë¬´ëŠ¬ í•­ì•„ë¦¬", meta: "ç™½ç£é‘ç•«éŠ…ç•«é•·ç”Ÿæ–‡å£º", description: "ì¥ìƒë¬´ëŠ¬ëŠ” ë§ ê·¸ëŒ€ë¡œ 'ì˜¤ë˜ ì‚´ê¸°'ë¥¼ ê¸°ì›í•˜ëŠ” ë¬´ëŠ¬ì…ë‹ˆë‹¤. ì‚¬ìš©í•˜ê±°ë‚˜ ë³´ëŠ” ì‚¬ëŒì˜ ë¬´ë³‘ì¥ìˆ˜(ç„¡ç—…é•·å£½)ì™€ ë§Œìˆ˜ë¬´ê°•(è¬å£½ç„¡ç–†)ì„ ê¸°ì›í•˜ëŠ” ê¸¸ìƒ(å‰ç¥¥) ë¬´ëŠ¬ì…ë‹ˆë‹¤.", thumbs: ["img/gong/back/12.webp","img/gong/back/11.webp"] },

    { src: "img/gong/ch/1.webp", title: "ì²­ì ìƒê°ìš´í•™ë¬¸ ë§¤ë³‘", meta: "ê³ ë ¤ 12ì„¸ê¸° Â· êµ­ë³´ ì œ68í˜¸", description: "ê³ ë ¤ ì²­ìì˜ ëŒ€í‘œì‘ìœ¼ë¡œ, ìœ ë ¤í•œ Sì ê³¡ì„ ê³¼ ë¹„ìƒ‰ì˜ í‘œë©´ì— ìƒê°ê¸°ë²•ìœ¼ë¡œ êµ¬ë¦„ê³¼ í•™ì„ ì •êµí•˜ê²Œ ìƒˆê²¨ ë„£ì—ˆìŠµë‹ˆë‹¤.", thumbs: ["img/gong/ch/2.png", "img/gong/ch/y.webp"] },
    { src: "img/gong/ch/ch1.webp", title: "ì²­ì ìƒê° ëª¨ë€ë‹¹ì´ˆë¬¸ í‘œí˜• ì£¼ì", meta: "é‘ç£ è±¡åµŒç‰¡ä¸¹æ–‡ ç“¢å½¢ æ³¨å­", description: "ëª¨ë€ì€ ê½ƒ ì¤‘ì˜ ì™•(èŠ±ç‹)ì´ë¼ ë¶ˆë¦´ ë§Œí¼ í™”ë ¤í•˜ê³  í¬ë©°, ë´„ì— ê°€ì¥ ë¨¼ì € í”¼ëŠ” ê½ƒ ì¤‘ í•˜ë‚˜ë‹¤. ê³ ë ¤Â·ì¡°ì„  ì‹œëŒ€ì—ëŠ” ë¶€ê·€ì˜í™”(å¯Œè²´æ¦®è¯), ì¦‰ ì¬ë¬¼ê³¼ ì˜í™”ë¡œìš´ ì‚¶ì„ ìƒì§•í•˜ëŠ” ê¸¸ìƒë¬¸ìœ¼ë¡œ ì—¬ê²¨ì¡Œë‹¤.", thumbs: ["img/gong/ch/ch1.webp", "img/gong/ch/ch7.webp"] },
    { src: "img/gong/ch/ch4.webp", title: "ì²­ì ì‚¬ìì¥ì‹ ëšœê»‘ í–¥ë¡œ", meta: "é‘ç£ ç…å­å½¢è“‹ é¦™çˆ", description: "í–¥ë¡œ ëšœê»‘ ìœ„ì˜ ì‚¬ìëŠ” í–¥ì—°ì´ í”¼ì–´ì˜¤ë¥¼ ë•Œ ì‚¬ìì˜ í¬íš¨ì²˜ëŸ¼ ë¶ˆë²•ì´ í¼ì ¸ë‚˜ê°€ ì•…ê·€ë¥¼ ë¬¼ë¦¬ì¹˜ê³  ê³µê°„ì„ ì •í™”í•œë‹¤ëŠ” ëœ»ì„ ë‹´ê³  ìˆë‹¤.", thumbs: ["img/gong/ch/ch4.png", "img/gong/ch/ch2.webp", "img/gong/ch/ch3.webp"] },
    { src: "img/gong/ch/6.webp", title: "ì²­ì ì–‘ê° ì—°ê½ƒ ëª¨ì–‘ í–¥ë¡œ", meta: "é‘ç£é™½åˆ»ï¦™èŠ±å½¢é¦™çˆ", description: "ê³ ë ¤ì˜ ì—°ê½ƒ ëª¨ì–‘ ì²­ì í–¥ë¡œëŠ” ì¤‘êµ­ì—ì„œ ì „ë˜ëœ í–¥ë¡œë¥¼ ëª¨ë°©í•œë°ì„œ ë¹„ë¡¯ë˜ì—ˆìœ¼ë©°, íŠ¹íˆ ì—¬ìš”(æ±çª¯)ì˜ ì˜í–¥ì´ ì»¸ë˜ ê²ƒìœ¼ë¡œ ì—¬ê²¨ì§„ë‹¤.", thumbs: ["img/gong/ch/6.png", "img/gong/ch/y.webp"] },
    { src: "img/gong/ch/8.webp", title: "ì²­ì ìƒê° ëª¨ë€ ì¤„ê¸° ë¬´ëŠ¬ ê¸°ë¦„ë³‘", meta: "é‘ç£ è±¡åµŒ ç‰¡ï¥æŠ˜ææ–‡ æ²¹ç”", description: "ì™•ì‹¤, ê·€ì¡±ë“¤ì´ ì„ í˜¸í•œ ê¸¸ìƒë¬¸ìœ¼ë¡œ ì‚¬ì¹˜Â·í™”ë ¤í•¨ì˜ ìƒì§•ì´ ì•„ë‹ˆë¼ ë²ˆì°½í•˜ê³  í’ìš”ë¡œìš´ ì‚¶ì„ ê¸°ì›í•˜ëŠ” ì˜ë¯¸ë¡œ ì‚¬ìš©í•˜ì˜€ë‹¤.", thumbs: ["img/gong/ch/8.png", "img/gong/ch/g.webp"] },
    { src: "img/gong/ch/h.webp", title: "ì²­ì ìƒê° êµ¬ë¦„ í•™ ë¬´ëŠ¬ ë„¤ê·€ í•­ì•„ë¦¬", meta: "é‘ç£ è±¡åµŒ é›²é¶´æ–‡ å››è€³å£º", description: "í•™ì€ ê³ ê³ í•¨ê³¼ ì²œë…„ì˜ ì¥ìˆ˜ë¥¼ ìƒì§•í•˜ëŠ” ë•Œë¬¸ì¸ì§€ ìƒê°ì²­ìì˜ ë¬´ëŠ¬ ì†Œì¬ë¡œ ìì£¼ ë“±ì¥í•œë‹¤. ìš°ì•„í•œ ë¬¸ì–‘ í‘œí˜„ì—ì„œ ê³ ë ¤ ê·€ì¡± ì„¸ê³„ì˜ ì¼ë©´ì„ ì—¿ë³¼ ìˆ˜ ìˆë‹¤.", thumbs: ["img/gong/ch/h.webp", "img/gong/ch/hh.webp"] },
    { src: "img/gong/ch/33.webp", title: "ì²­ì ìƒê° ì—°ê½ƒ ë„ì¿¨ ë¬´ëŠ¬ í•©", meta: "é‘ç£ è±¡åµŒ ï¦™å”è‰æ–‡ ç›’", description: "ì—°ê½ƒì€ ì§„í™ ì†ì—ì„œ í”¼ì–´ë‚˜ì§€ë§Œ ê½ƒìì€ ë”ëŸ½í˜€ì§€ì§€ ì•ŠëŠ”ë‹¤. ì´ íŠ¹ì§• ë•Œë¬¸ì— ë¶ˆêµì—ì„œëŠ” ë²ˆë‡Œ ì†ì—ì„œë„ ê¹¨ë—í•¨ì„ ìƒì§€ ì•ŠëŠ” ë§ˆìŒì„ ìƒì§•í•œë‹¤.", thumbs: ["img/gong/ch/33.webp", "img/gong/ch/44.webp"] },
    { src: "img/gong/ch/ch9.webp", title: "ì²­ì ê°í™” ë³´ìƒí™” ë¬´ëŠ¬ í•­ì•„ë¦¬", meta: "	é‘ç£é™½åˆ»å¯¶ç›¸èŠ±æ–‡å£º", description: "ë³´ìƒí™”ëŠ” íŠ¹ì • ì‹¤ì œ ê½ƒì´ ì•„ë‹ˆë¼, ì—°ê½ƒÂ·ëª¨ë€ ë“±ì˜ ìš”ì†Œë¥¼ ì´ìƒì ìœ¼ë¡œ ê²°í•©í•œ ìƒìƒì  â€˜ê¸¸ìƒ(å‰ç¥¥) ê½ƒâ€™ì´ë‹¤. ë¶ˆêµ ë¯¸ìˆ ì—ì„œ ìœ ë˜í•´ ê³ ë ¤ ì²­ìì— ë„ë¦¬ ì“°ì˜€ë‹¤. ë³´ìƒí™”ì˜ â€˜ìƒ(ç›¸)â€™ì€ ë¶ˆÂ·ë³´ì‚´ì˜ ìƒìŠ¤ëŸ¬ìš´ ëª¨ìŠµ(ìƒí˜¸)ì„ ëœ»í•œë‹¤. ê·¸ë˜ì„œ ì •í™”Â·ì„±ìŠ¤ëŸ¬ì›€Â·ê·¹ë½ì„¸ê³„ë¥¼ ìƒì§•í•œë‹¤.", thumbs: ["img/gong/ch/ch8.webp", "img/gong/ch/ch9.webp"] },

    { src: "img/gong/na/1.webp", title: "ë‚˜ì „ êµ½ë‹¤ë¦¬ ì ‘ì‹œ", meta: "ï¤‘éˆ¿æ¼†å™¨é«˜æ¯", description: "ì°¸ì™¸ ëª¨ì–‘ì˜ ëª¸ì²´ëŠ” ì„¸ë¡œë¡œ ëœ ê³¨ì„ ë‚´ì–´ ì—¬ëŸ ë©´ìœ¼ë¡œ ë‚˜ëˆ„ì—ˆê³ , ê° ë©´ë§ˆë‹¤ êµ­í™”ì™€ ëª¨ë€ê½ƒì„ í•œ ì¤„ê¸°ì”© êµëŒ€ë¡œ í‘ë°± ìƒê°í•˜ì˜€ë‹¤.", thumbs: ["img/gong/na/1.webp"] },
    { src: "img/gong/na/2.webp", title: "ë‚˜ì „ ì‚¬ìë¬´ëŠ¬ ìƒì", meta: "ï¤‘éˆ¿æ¼†å™¨ç…å­æ–‡ç®±å­", description: "ì‚¬ìëŠ” ìš©ë§¹í•œ ë™ë¬¼ë¡œ, ì¡ê·€ì™€ ì•…í•œ ê¸°ìš´ì„ ì«“ëŠ” í˜ì´ ìˆë‹¤ê³  ì—¬ê²¨ì¡Œë‹¤. ìƒìë¥¼ ì‚¬ìš©í•˜ëŠ” ì‚¬ëŒì„ ë³´í˜¸í•˜ê³  ë¶ˆê¸¸í•œ ì¼ì„ ë§‰ì•„ì¤€ë‹¤ëŠ” ì˜ë¯¸ë¥¼ ë¶€ì—¬í–ˆë‹¤.", thumbs: ["img/gong/na/2.webp"] },
    { src: "img/gong/na/3.webp", title: "ë‚˜ì „ ì‹ ìˆ˜ ë¬´ëŠ¬ ì ‘ì‹œ", meta: "	èºéˆ¿æ¼†å™¨çš¿", description: "ê·¸ë¦‡ ì•ˆìª½ ì¤‘ì•™ì—ë³µ(ç¦) ìê°€ ìˆê³ , ì‚¬ë°©ì— ìš©, ê±°ë¶, ê³µì‘ ë“± ì‚¬ì‹ (å››ç¥)ê³¼ ë¹„ìŠ·í•œ ë™ë¬¼ë“¤ì´ ìˆë‹¤. ì›ìœ¼ë¡œ êµ¬ë¶„ëœ ë°”ê¹¥ìª½ì—ëŠ” ì¥, ì†Œ, í˜¸ë‘ì´, í† ë¼ ë“± 12ì§€(æ”¯)ì— í•´ë‹¹í•˜ëŠ” ë™ë¬¼ë“¤ì´ ë‚˜ë¬´, í’€, ë°”ìœ„ì™€ í•¨ê»˜ í‘œí˜„ë˜ì–´ ìˆë‹¤.", thumbs: ["img/gong/na/3.webp"] },
    { src: "img/gong/na/4.webp", title: "ë‚˜ì „ì¹ ê¸°ëª¨ë€ë‹¹ì´ˆë§¤ì£½ë¬¸í•¨", meta: "é‘ç£ è±¡åµŒ ç‰¡ï¥æŠ˜ææ–‡ æ²¹ç”", description: "ëª¨ë€ê½ƒì€ ë°±ìƒê°ì´, ìì€ í‘ìƒê°ì´ ë˜ì—ˆëŠ”ë°, ë„ì•ˆí™”ë˜ì–´ ì‚¬ì‹¤ì ì¸ ê²ƒê³¼ëŠ” ì°¨ì´ê°€ ìˆìœ¼ë‚˜, ëª¸ì²´ì™€ ì–´ìš°ëŸ¬ì§„ í¬ê¸°ì™€ ë°°ì¹˜ë¡œ ì¡°í™”ë¥¼ ì´ë£¬ë‹¤.", thumbs: ["img/gong/na/4.webp"] },
    { src: "img/gong/na/5.webp", title: "í˜¸ë‘ì´ ë¬´ëŠ¬ ë‚˜ì „ì¹ ê¸° ë² ê°¯ëª¨", meta: "èºéˆ¿æ¼†å™¨è™æ–‡æ•é ­é ‚", description: "í˜¸ë‘ì´ëŠ” ìš°ë¦¬ ì „í†µì—ì„œ ì•…ê·€ì™€ ì¡ê·€ë¥¼ ë¬¼ë¦¬ì¹˜ëŠ” ê°€ì¥ ê°•ë ¥í•œ ìˆ˜í˜¸ ë™ë¬¼ë¡œ ì—¬ê²¨ì¡Œë‹¤. ë² ê°¯ëª¨ì— í˜¸ë‘ì´ë¥¼ ìƒˆê¸´ ì´ìœ ëŠ” ìëŠ” ë™ì•ˆ ê¿ˆì†ì—ì„œ ì•¡ìš´ì´ ì¹¨ë²”í•˜ì§€ ëª»í•˜ê²Œ ë§‰ê¸° ìœ„í•´ì„œì´ë‹¤.", thumbs: ["img/gong/na/5.webp"] },
    { src: "img/gong/na/6.webp", title: "ë‚˜ì „ì¹ ê¸° ë´‰í™© ìš´ë¬¸ ìƒì", meta: "ï¤‘éˆ¿æ¼†å™¨é³³å‡°é›²æ–‡ç®±å­", description: "ì—°ê½ƒë„ì¿¨ ë¬´ëŠ¬[ï¦™å”è‰æ–‡]ì™€ êµ­í™” ë¬´ëŠ¬[èŠèŠ±æ–‡]ê°€ ë¹ˆí‹ˆì—†ì´ ìƒê°ë˜ì–´ ìˆë‹¤.", thumbs: ["img/gong/na/6.png"] },
    { src: "img/gong/na/7.webp", title: "ë‚˜ì „ ì¹ ê¸° í˜¸ë‘ì´ ë¬´ëŠ¬ ë² ê°¯ëª¨", meta: "ì¡°ì„  19ì„¸ê¸°", description: "í˜¸ë‘ì´ëŠ” ìš°ë¦¬ ì „í†µì—ì„œ ì•…ê·€ì™€ ì¡ê·€ë¥¼ ë¬¼ë¦¬ì¹˜ëŠ” ê°€ì¥ ê°•ë ¥í•œ ìˆ˜í˜¸ ë™ë¬¼ë¡œ ì—¬ê²¨ì¡Œë‹¤. ë² ê°¯ëª¨ì— í˜¸ë‘ì´ë¥¼ ìƒˆê¸´ ì´ìœ ëŠ” ìëŠ” ë™ì•ˆ ê¿ˆì†ì—ì„œ ì•¡ìš´ì´ ì¹¨ë²”í•˜ì§€ ëª»í•˜ê²Œ ë§‰ê¸° ìœ„í•´ì„œì´ë‹¤.", thumbs: ["img/gong/na/7.webp"] },
    { src: "img/gong/na/8.webp", title: "ë‚˜ì „ì¹ ê¸° ë² ê²Ÿëª¨", meta: "ï¤‘éˆ¿æ¼†å™¨æ•é£¾", description: "ì¤‘ì•™ì— ì„œë¡œ ë§ˆì£¼ ë³´ê³  ìˆëŠ” ë‘ ë§ˆë¦¬ì˜ ë‹­ì´ í¬ê²Œ í‘œí˜„ë˜ì–´ìˆë‹¤. ë¶€ë¶€ í•œ ìŒì˜ ë‹­ì€ í™”í•©ê³¼ ë¶€ë¶€ì˜ ê¸ˆì‹¤ì„ ìƒì§•í•œë‹¤.", thumbs: ["img/gong/na/8.webp"] }
  ];

  const viewport = document.getElementById('panViewport');
  const canvas   = document.getElementById('panCanvas');
  const panel    = document.getElementById('detailPanel');
  const closeBtn = document.getElementById('detailClose');
  const titleEl  = document.getElementById('detailTitle');
  const detailBodyEl = document.getElementById('detailBody');
  let   heroEl   = document.getElementById('detailHero'); // Let, as it will be replaced
  const thumbsEl = document.getElementById('detailThumbs');
  const metaEl   = document.getElementById('detailMeta');
  const ctaEl    = document.getElementById('detailCTA');
  const zoomInBtn  = document.getElementById('zoomIn');
  const zoomOutBtn = document.getElementById('zoomOut');
  const wrap         = document.getElementById('filterWrap');
  const filterBar    = document.getElementById('filterBar');
  const filterToggle = document.getElementById('filterToggle');
  const filterClose  = document.getElementById('filterClose');
  const chips        = filterBar.querySelectorAll('.chip');
  if(!viewport || !canvas) return;

  // ===== ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„ 1: pxVar í•¨ìˆ˜ =====
  // CSS ë³€ìˆ˜ ì½ê¸°ì— ì‹¤íŒ¨í•  ê²½ìš°(NaN)ë¥¼ ëŒ€ë¹„í•´ fallback ê°’ì„ ë°›ë„ë¡ ìˆ˜ì •
  const pxVar = (name, fallback) => parseFloat(getComputedStyle(document.documentElement).getPropertyValue(name).trim()) || fallback;
  const Z_MIN = 0.6, Z_MAX = 2, Z_STEP = 0.15;
const isBigDesktop = window.matchMedia('(min-width: 1600px)').matches;
const preferredStartScale = isBigDesktop ? 1.18 : 0.92;
let scale = preferredStartScale;
let targetScale = preferredStartScale;
  let pos={x:0,y:0}, targetPos={x:0,y:0};
  let vel={x:0,y:0};

  let isDown=false, moved=false, start={x:0,y:0}, downAt={x:0,y:0};
  const pointers = new Map();
  let isPinching=false, pinchStartDist=0, pinchStartScale=1, pinchCenter={x:0,y:0};

  const moveSamples=[];
  function sampleTarget(now){
    moveSamples.push({x:targetPos.x, y:targetPos.y, t:now});
    while (moveSamples.length>0 && now - moveSamples[0].t > 160) moveSamples.shift();
  }
  function releaseVelocity(){
    if(moveSamples.length<2) return {x:0,y:0};
    const last = moveSamples[moveSamples.length-1];
    let idx = moveSamples.length-2;
    for (; idx>=0; idx--){
      if (last.t - moveSamples[idx].t >= 60) break;
    }
    if (idx<0) idx=moveSamples.length-2;
    const prev = moveSamples[idx];
    const dt = Math.max(1, last.t - prev.t);
    const vx_ms = (last.x - prev.x) / dt;
    const vy_ms = (last.y - prev.y) / dt;
    const frame = 16.66;
    return { x: vx_ms * frame, y: vy_ms * frame };
  }

  function deriveCat(img){
    const src = (img.getAttribute('src')||'').toLowerCase();
    const alt = (img.getAttribute('alt')||'').toLowerCase();
    if (src.includes('/ch/') || alt.includes('celadon') || alt.includes('ì²­ì')) return 'cheongja';
    if (src.includes('/na/') || alt.includes('najeon') || alt.includes('ë‚˜ì „ì¹ ê¸°'))  return 'najeon';
    return 'baekja';
  }
  function tagCategories(){
    canvas.querySelectorAll('.pan-item img').forEach(img=>{
      img.closest('.pan-item').dataset.cat = deriveCat(img);
    });
  }

  function layoutStaggered(){
    // ===== ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„ 2: layoutStaggered í•¨ìˆ˜ =====
    // pxVar í•¨ìˆ˜ì— ê¸°ë³¸ê°’(320, 140, 140)ì„ ì „ë‹¬
    const SIZE = pxVar('--cell-size', 320), GAP=pxVar('--cell-gap', 140), PAD=pxVar('--cell-pad', 140), PITCH=SIZE+GAP;
    
    // PITCHê°€ 0ì´ë©´(CSS ë¡œë“œ ì‹¤íŒ¨) ë ˆì´ì•„ì›ƒì„ ì¤‘ë‹¨í•˜ì—¬ (0,0)ì— ìŒ“ì´ëŠ” ê²ƒì„ ë°©ì§€
    if (PITCH === 0) {
      console.warn("Grid layout failed: CSS variables not loaded?");
      return; 
    }

    const items = Array.from(canvas.querySelectorAll('.pan-item:not(.is-hidden)'));
    const idealCols = Math.max(6, Math.floor((viewport.clientWidth * 1.6) / PITCH));
    const COLS = Math.min(12, idealCols);

    items.forEach((item, idx)=>{
      const col = idx % COLS, row = Math.floor(idx / COLS), stagger = (col % 2 === 0) ? 0 : PITCH / 2;
      const x = PAD + col * PITCH + (Math.random()-0.5)*8;
      const y = PAD + stagger + row * PITCH + (Math.random()-0.5)*12;
      item.style.width  = SIZE + 'px';
      item.style.height = SIZE + 'px';
      item.style.transform = `translate(${x}px, ${y}px)`;
    });

    const rows = Math.ceil(items.length / COLS) + 1;
    const width  = PAD*2 + COLS*SIZE + (COLS-1)*GAP;
    const height = PAD*2 + rows*PITCH + PITCH/2;
    canvas.style.width  = width  + 'px';
    canvas.style.height = height + 'px';
  }

  function bounds(s=scale){
    const vw=viewport.clientWidth, vh=viewport.clientHeight;
    const cw=canvas.scrollWidth*s, ch=canvas.scrollHeight*s;
    const minX=(cw<=vw)?(vw-cw)/2:(vw-cw), maxX=(cw<=vw)?(vw-cw)/2:0;
    const minY=(ch<=vh)?(vh-ch)/2:(vh-ch), maxY=(ch<=vh)?(vh-ch)/2:0;
    return {minX,maxX,minY,maxY};
  }
  function clampTarget(){
    const b=bounds(targetScale);
    targetPos.x=Math.min(b.maxX,Math.max(b.minX,targetPos.x));
    targetPos.y=Math.min(b.maxY,Math.max(b.minY,targetPos.y));
  }

  let lastRenderPos = {x:0,y:0};
  let moveVelForReveal = {x:0,y:0};
  let revealScheduled=false;

  function revealNewlyVisible(){
    const rect = viewport.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top  + rect.height/2;

    const toReveal = [];
    canvas.querySelectorAll('.pan-item img').forEach(img=>{
      if (img.dataset.revealed === '1') return;
      if (img.closest('.pan-item').classList.contains('is-hidden')) return;
      const r = img.getBoundingClientRect();
      const intersects = r.right>rect.left && r.left<rect.right && r.bottom>rect.top && r.top<rect.bottom;
      if (!intersects) return;

      const vx = moveVelForReveal.x, vy = moveVelForReveal.y;
      const speed = Math.hypot(vx, vy);
      let key;
      if (speed > 0.5) {
        if (Math.abs(vx) >= Math.abs(vy)) key = (vx > 0) ? r.left : -r.right;
        else key = (vy > 0) ? r.top : -r.bottom;
      } else {
        const icx = r.left + r.width/2, icy = r.top + r.height/2;
        key = Math.hypot(icx - cx, icy - cy);
      }
      toReveal.push({img, key});
    });

    toReveal.sort((a,b)=> a.key - b.key);
    const base = .06, step = .05;
    toReveal.forEach((o,i)=>{
      o.img.style.setProperty('--delay', (base + i*step + Math.random()*0.04).toFixed(3)+'s');
      o.img.classList.add('pop-seq');
      o.img.dataset.revealed = '1';
    });
  }
  function scheduleReveal(){
    if (revealScheduled) return;
    revealScheduled = true;
    requestAnimationFrame(()=>{ revealScheduled=false; revealNewlyVisible(); });
  }

  const LERP = 0.18;
  const FRICTION = 0.92;
  const BOUNCE = 0.35;

  function tick(){
    if(!isDown && !isPinching){
      targetPos.x += vel.x;
      targetPos.y += vel.y;
      vel.x *= FRICTION; vel.y *= FRICTION;

      const b = bounds(targetScale);
      if (targetPos.x < b.minX || targetPos.x > b.maxX){
        targetPos.x = Math.max(b.minX, Math.min(b.maxX, targetPos.x));
        vel.x *= -BOUNCE;
      }
      if (targetPos.y < b.minY || targetPos.y > b.maxY){
        targetPos.y = Math.max(b.minY, Math.min(b.maxY, targetPos.y));
        vel.y *= -BOUNCE;
      }
      if (Math.abs(vel.x) < 0.02) vel.x = 0;
      if (Math.abs(vel.y) < 0.02) vel.y = 0;
    }

    clampTarget();
    pos.x += (targetPos.x - pos.x) * LERP;
    pos.y += (targetPos.y - pos.y) * LERP;
    scale += (targetScale - scale) * LERP;

    canvas.style.transform = `translate3d(${pos.x}px,${pos.y}px,0) scale(${scale})`;

    moveVelForReveal.x = pos.x - lastRenderPos.x;
    moveVelForReveal.y = pos.y - lastRenderPos.y;
    lastRenderPos.x = pos.x; lastRenderPos.y = pos.y;

    scheduleReveal();
    requestAnimationFrame(tick);
  }

  function topCenter(immediate=true){
    const vw=viewport.clientWidth, cw=canvas.scrollWidth*scale;
    const b=bounds(scale);
    targetPos.x=(vw-cw)/2;
    targetPos.y=b.maxY;
    if (immediate){ pos.x=targetPos.x; pos.y=targetPos.y; }
  }

  function zoomTo(ns, ax, ay){
    ns=Math.max(Z_MIN,Math.min(Z_MAX,ns));
    ax ??= viewport.clientWidth/2;
    ay ??= viewport.clientHeight/2;
    const k = ns/scale;
    targetPos.x = ax - (ax - pos.x) * k;
    targetPos.y = ay - (ay - pos.y) * k;
    targetScale = ns;
    clampTarget();
  }

  const CLICK_SLOP=10;

  viewport.addEventListener('pointerdown',e=>{
    e.preventDefault();
    pointers.set(e.pointerId,{x:e.clientX,y:e.clientY});
    if(pointers.size===1){
      isDown=true; moved=false; vel.x=0; vel.y=0;
      start={x:targetPos.x,y:targetPos.y}; downAt={x:e.clientX,y:e.clientY};
      moveSamples.length=0;
      viewport.classList.add('dragging');
      try{ viewport.setPointerCapture(e.pointerId);}catch(_){}
    }else if(pointers.size===2){
      isPinching=true;
      const arr=[...pointers.values()];
      pinchStartDist = Math.hypot(arr[0].x - arr[1].x, arr[0].y - arr[1].y);
      pinchStartScale= targetScale;
      pinchCenter    = { x:(arr[0].x+arr[1].x)/2, y:(arr[0].y+arr[1].y)/2 };
      viewport.classList.add('dragging');
    }
    hideHoverLabel();
  });

  viewport.addEventListener('pointermove',e=>{
    if(!pointers.has(e.pointerId)) return;
    pointers.set(e.pointerId,{x:e.clientX,y:e.clientY});
    const now = performance.now();

    if(isPinching && pointers.size===2){
      const arr=[...pointers.values()];
      const dist = Math.hypot(arr[0].x - arr[1].x, arr[0].y - arr[1].y);
      const factor = dist / pinchStartDist;
      zoomTo(Math.max(Z_MIN,Math.min(Z_MAX,pinchStartScale*factor)), pinchCenter.x, pinchCenter.y);
      sampleTarget(now);
    }else if(isDown && pointers.size===1){
      const dx=e.clientX-downAt.x, dy=e.clientY-downAt.y;
      if(Math.hypot(dx,dy)>CLICK_SLOP) moved=true;
      targetPos.x = start.x + dx;
      targetPos.y = start.y + dy;
      sampleTarget(now);
    }
  });

  function endPointer(e){
    const wasPinch = isPinching;
    pointers.delete(e.pointerId);
    if(pointers.size<2) isPinching=false;
    if(pointers.size===0){
      if(isDown && !wasPinch){
        vel = releaseVelocity();
      }
      isDown=false;
      viewport.classList.remove('dragging');
    }
  }
  viewport.addEventListener('pointerup',e=>{
    const wasMoved = moved || isPinching;
    endPointer(e);
    if(wasMoved) return;

    const el = document.elementFromPoint(e.clientX, e.clientY);
    const hitPanel = el && el.closest && el.closest('#detailPanel');
    const hitItem  = el && el.closest && el.closest('.pan-item');
    const panelOpen = panel.classList.contains('open');

    if(panelOpen){
      if(hitPanel){ return; }
      if(hitItem){
        const img = hitItem.querySelector('img');
        openPanelFor(img,true);
        flyToHero(img);
      }else{
        closePanel();
      }
    }else{
      if(hitItem){
        const img = hitItem.querySelector('img');
        const targetRect = measureHeroTargetRect(img);
        requestAnimationFrame(()=>{
          panel.classList.add('open');
          panel.setAttribute('aria-hidden','false');
          openPanelFor(img,true);
          flyToHero(img,targetRect);
        });
      }
    }
  });
  viewport.addEventListener('pointercancel', endPointer);
  viewport.addEventListener('pointerleave',  endPointer);

  ['pointerdown','pointerup','click'].forEach(ev=>{
    zoomInBtn.addEventListener(ev, e=>{ e.stopPropagation(); });
    zoomOutBtn.addEventListener(ev, e=>{ e.stopPropagation(); });
  });
  zoomInBtn.addEventListener('click', e=>{ e.preventDefault(); zoomTo(targetScale+Z_STEP); });
  zoomOutBtn.addEventListener('click', e=>{ e.preventDefault(); zoomTo(targetScale-Z_STEP); });
  viewport.addEventListener('wheel',(e)=>{
    e.preventDefault();
    const d=Math.sign(e.deltaY);
    const rect = viewport.getBoundingClientRect();
    const ax = Math.max(0, Math.min(rect.width,  e.clientX - rect.left));
    const ay = Math.max(0, Math.min(rect.height, e.clientY - rect.top));
    zoomTo(targetScale+(d>0?-Z_STEP:Z_STEP), ax, ay);
  },{passive:false});

  function setMaskedTitle(el, text){
    el.innerHTML = '';
    Array.from(text).forEach((ch,i)=>{
      const wrap=document.createElement('span'); wrap.className='mask';
      const inner=document.createElement('span'); inner.className='char';
      inner.textContent=ch; inner.style.setProperty('--d',(i*0.04)+'s');
      wrap.appendChild(inner); el.appendChild(wrap);
    });
  }
  
  function openPanelFor(imgEl){
    const clickedSrc = imgEl.getAttribute('src');
    const dataForImage = imageData.find(item => item.src === clickedSrc);
    const descEl = document.getElementById('detailDescription');

    const title = dataForImage ? dataForImage.title : (imgEl.getAttribute('alt') || 'Collection');
    const meta = dataForImage ? dataForImage.meta : 'ìƒì„¸ ì •ë³´ ì—†ìŒ';
    const description = dataForImage ? dataForImage.description : 'ì´ ì‘í’ˆì— ëŒ€í•œ ìƒì„¸ ì„¤ëª…ì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.';
    const collectionLink = dataForImage ? dataForImage.collectionLink : '#';
    const thumbs = dataForImage ? dataForImage.thumbs : [clickedSrc];

    setMaskedTitle(titleEl, title);
    
    // Clear any old hero images before creating the new one
    const oldHeroes = detailBodyEl.querySelectorAll('.detail-hero');
    oldHeroes.forEach(h => h.remove());

    heroEl = document.createElement('img');
    heroEl.id = 'detailHero';
    heroEl.className = 'detail-hero';
    heroEl.src = clickedSrc;
    detailBodyEl.insertBefore(heroEl, metaEl);
    
    heroEl.style.visibility = 'hidden';
    metaEl.textContent = meta;
    descEl.textContent = description;

    ctaEl.onclick = () => {
      if (collectionLink && collectionLink !== '#') {
        window.location.href = collectionLink;
      } else {
        alert('ê´€ë ¨ ì»¬ë ‰ì…˜ì´ ì¤€ë¹„ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.');
      }
    };
    
    thumbsEl.innerHTML = '';
    thumbs.forEach(s => {
      const t = document.createElement('div');
      t.className = 'thumb';
      const i = new Image();
      i.src = s;
      t.appendChild(i);
      t.addEventListener('click', () => {
        const newSrc = i.src;
        if (heroEl.src === newSrc) return;

        // Preload image to prevent flicker
        const tempImg = new Image();
        tempImg.src = newSrc;
        tempImg.onload = () => {
            const newHero = document.createElement('img');
            newHero.className = 'detail-hero';
            newHero.src = newSrc;
            newHero.style.opacity = 0;
            detailBodyEl.insertBefore(newHero, heroEl);

            requestAnimationFrame(() => {
                newHero.style.opacity = 1;
                heroEl.style.opacity = 0;
            });

            setTimeout(() => {
                heroEl.remove();
                heroEl = newHero;
            }, 600); // must match CSS transition time
        };
      });
      thumbsEl.appendChild(t);
    });
  }

  function closePanel(){ panel.classList.remove('open'); panel.setAttribute('aria-hidden','true'); }
  closeBtn.addEventListener('click', closePanel);
  document.addEventListener('keydown', e=>{ if(e.key==='Escape') closePanel(); });

  function measureHeroTargetRect(imgEl){
    openPanelFor(imgEl);
    panel.classList.add('measuring');
    const rect=heroEl.getBoundingClientRect();
    panel.classList.remove('measuring');
    return rect;
  }
  
  function flyToHero(imgEl, preRect){
    const start = imgEl.getBoundingClientRect();
    
    const flyer = document.createElement('div');
    flyer.className = 'fly-clone';
    const cloneImg = imgEl.cloneNode(true);
    cloneImg.style = '';
    flyer.appendChild(cloneImg);
    
    flyer.style.left   = start.left + 'px';
    flyer.style.top    = start.top + 'px';
    flyer.style.width  = start.width + 'px';
    flyer.style.height = start.height + 'px';
    
    document.body.appendChild(flyer);

    const target = preRect || heroEl.getBoundingClientRect();
    
    requestAnimationFrame(()=>{
      flyer.style.left   = target.left + 'px';
      flyer.style.top    = target.top + 'px';
      flyer.style.width  = target.width + 'px';
      flyer.style.height = target.height + 'px';
    });

    flyer.addEventListener('transitionend', ()=>{
      flyer.remove();
      heroEl.style.visibility = 'visible';
    }, {once:true});
  }

  const hoverLabel = document.createElement('div');
  hoverLabel.className = 'hover-label';
  document.body.appendChild(hoverLabel);

  function showHoverLabel(name){
    if (!name) return;
    hoverLabel.textContent = name;
    hoverLabel.classList.add('show');
  }
  function hideHoverLabel(){ hoverLabel.classList.remove('show'); }

  canvas.addEventListener('mousemove', (e)=>{
    if (!hoverLabel.classList.contains('show')) return;
    const margin = 12;
    const x = Math.max(margin, Math.min(window.innerWidth  - margin, e.clientX));
    const y = Math.max(margin, Math.min(window.innerHeight - margin, e.clientY));
    hoverLabel.style.left = x + 'px';
    hoverLabel.style.top  = y + 'px';
  });
  canvas.addEventListener('mouseover', (e)=>{
    const item = e.target.closest('.pan-item');
    if(!item) return;
    const img = item.querySelector('img');
    const name = img?.dataset.name || img?.getAttribute('alt') || '';
    showHoverLabel(name);
  });
  canvas.addEventListener('mouseout', (e)=>{
    const to = e.relatedTarget;
    if (to && canvas.contains(to) && to.closest('.pan-item')) return;
    hideHoverLabel();
  });
  viewport.addEventListener('pointerdown', hideHoverLabel);

  let introPlayed=false;
  function playIntro(){
    if(introPlayed) return; introPlayed=true;
    const rect = viewport.getBoundingClientRect();
    const cx = rect.left + rect.width/2;
    const cy = rect.top  + rect.height/2;

    const items = Array.from(canvas.querySelectorAll('.pan-item:not(.is-hidden)'))
      .map(it=>({ it, r: it.getBoundingClientRect() }))
      .filter(({r})=> r.right>rect.left && r.left<rect.right && r.bottom>rect.top && r.top<rect.bottom)
      .map(({it,r})=>{
        const img = it.querySelector('img');
        const cxI = r.left + r.width/2;
        const cyI = r.top  + r.height/2;
        const d   = Math.hypot(cxI - cx, cyI - cy);
        return {img, d};
      })
      .sort((a,b)=>a.d-b.d);

    const base = .12, step = .05;
    items.forEach((o,i)=>{
      o.img.style.setProperty('--delay', (base + i*step + Math.random()*0.06).toFixed(3)+'s');
      o.img.classList.add('pop-seq');
      o.img.dataset.revealed = '1';
    });
  }
  function scheduleIntro(){
    const imgs=Array.from(canvas.querySelectorAll('.pan-item img'));
    const decodes=imgs.map(i=>i.decode().catch(()=>{}));
    let fail=setTimeout(()=>playIntro(),700);
    Promise.allSettled(decodes).then(()=>{ clearTimeout(fail); playIntro(); });
  }

  function applyFilter(mode){
    chips.forEach(chip=>{
      const pressed = chip.dataset.filter === mode || (mode==='all' && chip.dataset.filter==='all');
      chip.setAttribute('aria-pressed', pressed ? 'true' : 'false');
    });
    closePanel();

    canvas.querySelectorAll('.pan-item img').forEach(img => {
        img.removeAttribute('data-revealed');
        img.classList.remove('pop-seq');
    });

    canvas.querySelectorAll('.pan-item').forEach(el=>{
      const cat = el.dataset.cat || 'baekja';
      if (mode==='all' || mode===cat) {
        el.classList.remove('is-hidden');
      } else {
        el.classList.add('is-hidden');
      }
    });

    requestAnimationFrame(() => {
      layoutStaggered();
      scheduleReveal();
      const b=bounds(targetScale);
      targetPos.x = (viewport.clientWidth - canvas.scrollWidth*targetScale)/2;
      targetPos.y = b.maxY;
      vel.x=0; vel.y=0;
    });
  }
  chips.forEach(chip=> chip.addEventListener('click', ()=> applyFilter(chip.dataset.filter)));

  function openFilterUI(){
    wrap.classList.add('open');
    filterToggle.setAttribute('aria-expanded','true');
    filterBar.setAttribute('aria-hidden','false');
  }
  function closeFilterUI(){
    wrap.classList.remove('open');
    filterToggle.setAttribute('aria-expanded','false');
    filterBar.setAttribute('aria-hidden','true');
  }
  filterToggle.addEventListener('click', (e)=>{ e.stopPropagation(); openFilterUI(); });
  filterClose .addEventListener('click', (e)=>{ e.stopPropagation(); closeFilterUI(); });
  document.addEventListener('pointerdown',(e)=>{
    const inWrap = e.target.closest && e.target.closest('#filterWrap');
    if(!inWrap) closeFilterUI();
  });

  /* ===== Init ===== */
  const init = ()=>{
    tagCategories();
    layoutStaggered();

    // ===== ğŸ’¡ ìˆ˜ì •ëœ ë¶€ë¶„ 3: init í•¨ìˆ˜ (ì´ˆê¸° ì¤Œ ë ˆë²¨) =====
    // í™”ë©´ í¬ê¸°ì™€ ê´€ê³„ì—†ì´ í•­ìƒ ìµœì†Œ ì¤Œ(Z_MIN)ìœ¼ë¡œ ì‹œì‘í•˜ë„ë¡ ìˆ˜ì •
    const initialScale = Z_MIN; // í™”ë©´ ë„ˆë¹„ì— ë”°ë¼ ì´ˆê¸° ì¤Œ ë ˆë²¨ ê²°ì •
    scale = targetScale = initialScale; // ê²°ì •ëœ ê°’ìœ¼ë¡œ ìŠ¤ì¼€ì¼ ì„¤ì •
    topCenter(true);
    targetPos.x = pos.x; targetPos.y = pos.y;
    requestAnimationFrame(tick);

    const params = new URLSearchParams(window.location.search);
    const initial = params.get('filter');
    if (initial && ['all','baekja','cheongja','najeon'].includes(initial)) {
      openFilterUI();
      applyFilter(initial);
    } else {
      scheduleIntro();
      closeFilterUI();
    }
  };
  if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', init);
  else init();

  window.addEventListener('resize', ()=>{
    layoutStaggered();
    clampTarget();
  });
})();
</script>

<script type="text/babel" data-presets="env,react">
    const { useRef, useEffect, Fragment } = React;
    function FlowingMenu({ items = [] }) {
      useEffect(() => { items.forEach(it => { if (it.image){ const img=new Image(); img.src=it.image; } }); }, [items]);
      return ( <div className="fm-menu-wrap"><nav className="fm-menu" aria-label="Hamburger items">{items.map((it, i) => <MenuItem key={i} {...it} />)}</nav></div> );
    }
    
    function MenuItem({ link = '#', text, image }) {
      const itemRef = useRef(null);
      const marqueeRef = useRef(null);
      const marqueeInnerRef = useRef(null);
      const animationDefaults = { duration: 0.6, ease: 'expo.out' };
      const dist = (x,y,x2,y2)=>{ const dx=x-x2, dy=y-y2; return dx*dx+dy*dy; };
      const closestEdge = (mx,my,w,h)=> dist(mx,my,w/2,0) < dist(mx,my,w/2,h) ? 'top':'bottom';

      const enter = (ev)=>{
        if (typeof gsap === 'undefined') return;
        if (!itemRef.current || !marqueeRef.current || !marqueeInnerRef.current) return;
        const rect = itemRef.current.getBoundingClientRect();
        const x=(ev.clientX??0)-rect.left, y=(ev.clientY??0)-rect.top;
        const edge=closestEdge(x,y,rect.width,rect.height);
        gsap.timeline({ defaults: animationDefaults })
          .set(marqueeRef.current,{ y:edge==='top' ? '-101%':'101%' },0)
          .set(marqueeInnerRef.current,{ y:edge==='top' ? '101%':'-101%' },0)
          .to([marqueeRef.current,marqueeInnerRef.current],{ y:'0%' },0);
      };
      const leave = (ev)=>{
        if (typeof gsap === 'undefined') return;
        if (!itemRef.current || !marqueeRef.current || !marqueeInnerRef.current) return;
        const rect=itemRef.current.getBoundingClientRect();
        const x=(ev.clientX??0)-rect.left, y=(ev.clientY??0)-rect.top;
        const edge=closestEdge(x,y,rect.width,rect.height);
        gsap.timeline({ defaults: animationDefaults })
          .to(marqueeRef.current,{ y:edge==='top' ? '-101%':'101%' },0)
          .to(marqueeInnerRef.current,{ y:edge==='top' ? '101%':'-101%' },0);
      };

      const onClick = () => {
        if (link && link.startsWith('#')) {
          if (window.toggleMenu) window.toggleMenu(false);
        }
      };

      const repeated = Array.from({ length:4 }).map((_,i)=>(
        <Fragment key={i}>
          <span>{text}</span>
          <div className="fm-marquee__img" style={{ backgroundImage:`url(${image})` }} />
        </Fragment>
      ));

      return (
        <div className="fm-menu__item" ref={itemRef}>
          <a className="fm-menu__item-link" href={link}
            onPointerEnter={enter} onPointerLeave={leave}
            onFocus={enter} onBlur={leave} onClick={onClick}>
            {text}
          </a>
          <div className="fm-marquee" ref={marqueeRef} aria-hidden="true">
            <div className="fm-marquee__inner-wrap" ref={marqueeInnerRef}>
              <div className="fm-marquee__inner">{repeated}</div>
            </div>
          </div>
        </div>
      );
    }

    
    (function mountMenu(){
      const menuRoot = document.getElementById('react-menu-root');
      if (!menuRoot) return;

      const menuItems = [
                    { link: 'ceramics.html',    text: 'ê³µì˜ˆí’ˆ',   image: 'img/gong/do.png' },
                    { link: 'sumak.html',     text: 'ìˆ˜ë§‰ìƒˆ', image: 'img/6.jpg' },
                    { link: 'hanbok.html', text: 'í•œë³µ', image: 'img/han/bg.jpg' },
                    { link: 'card.html',   text: 'ë¶€ì ', image: 'img/8.jpg' },
      ];

      if (menuRoot.__mounted) return;
      menuRoot.__mounted = true;

      try {
        if (ReactDOM.createRoot) {
          const root = ReactDOM.createRoot(menuRoot);
          root.render(<FlowingMenu items={menuItems} />);
        } else {
          ReactDOM.render(React.createElement(FlowingMenu, { items: menuItems }), menuRoot);
        }
      } catch (err) {
        console.error('Menu mount failed:', err);
      }
    })();

</script>

<script>
  (() => {
    const btn = document.getElementById('menuBtn');
    const overlay = document.getElementById('menuOverlay');
    const panel = document.getElementById('menuPanel');
    if(!btn || !overlay || !panel) return;
    
    function setOpen(open){
      btn.setAttribute('aria-expanded', String(open));
      overlay.classList.toggle('open', open);
      overlay.setAttribute('aria-hidden', String(!open));
      document.body.style.overflow = open ? 'hidden' : '';
    }
    btn.addEventListener('click', () => setOpen(btn.getAttribute('aria-expanded') !== 'true'));
    overlay.addEventListener('click', () => setOpen(false));
    panel.addEventListener('click', (e) => e.stopPropagation());
    window.addEventListener('keydown', (e) => { if(e.key === 'Escape') setOpen(false); });
    window.toggleMenu = function(next){ if (typeof next === 'boolean') setOpen(next); else setOpen(btn.getAttribute('aria-expanded') !== 'true'); };
  })();
</script>

</body>
</html>